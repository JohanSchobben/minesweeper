import{r as t,c as e,h as i,H as s}from"./p-c24bafe5.js";const o=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],l=(t,e,i)=>{const s=t.tiles[i][e];if(s.state="cleared",s.mine)return Object.assign(Object.assign({},t),{state:"lost"});if(0===s.proximityMines)for(const r of o)t.tiles[s.y+r[0]]&&t.tiles[s.y+r[0]][s.x+r[1]]&&"cleared"!==t.tiles[s.y+r[0]][s.x+r[1]].state&&l(t,t.tiles[s.y+r[0]][s.x+r[1]].x,t.tiles[s.y+r[0]][s.x+r[1]].y);return{tiles:[...t.tiles],state:t.state,amountOfMines:t.amountOfMines,remainingMines:t.remainingMines}},r=class{constructor(i){t(this,i),this.onStartClick=this.onStartClick.bind(this),this.onTileClick=this.onTileClick.bind(this),this.lose=e(this,"lose",7),this.win=e(this,"win",7)}onStartClick(){this.board=((t=8,e=10)=>{const i=[];let s=0;for(let o=0;o<t;o++){i[o]=[];for(let e=0;e<t;e++)i[o][e]={mine:!1,proximityMines:0,state:"closed",x:e,y:o}}for(;s<e;){const e=Math.floor(Math.random()*t),o=Math.floor(Math.random()*t);i[o][e].mine||(i[o][e].mine=!0,++s)}for(let l=0;l<t;l++)for(let e=0;e<t;e++){let t=0;for(const s of o)i[l+s[0]]&&i[l+s[0]][e+s[1]]&&i[l+s[0]][e+s[1]].mine&&t++;i[l][e].proximityMines=t}return{tiles:i,state:"play",amountOfMines:e,remainingMines:e}})(8,10),this.startTime=Date.now()}onTileRightClick(t,e,i){if(i.preventDefault(),this.board=((t,e,i)=>{let s="play";const o=t.tiles[i][e];if("flagged"===o.state)return((t,e,i)=>{const s=t.tiles[i][e];"flagged"===s.state&&(s.state="closed");const o=t.tiles.flat().filter(t=>"flagged"===t.state).length;return{tiles:[...t.tiles],state:t.state,amountOfMines:t.amountOfMines,remainingMines:t.amountOfMines-o}})(t,e,i);o.state="flagged";const l=t.tiles.flat().filter(t=>"flagged"===t.state&&t.mine).length,r=t.tiles.flat().filter(t=>"flagged"===t.state).length;return l===t.amountOfMines&&(s="win"),{tiles:[...t.tiles],state:s,amountOfMines:t.amountOfMines,remainingMines:t.amountOfMines-r}})(this.board,e,t),"win"===this.board.state){const t=Date.now();this.win.emit({size:this.board.tiles.length,won:!0,time:(t-this.startTime)/1e3})}}onTileClick(t,e){if(this.board=l(this.board,e,t),"lost"===this.board.state){const t=Date.now();this.lose.emit({size:this.board.tiles.length,won:!1,time:(t-this.startTime)/1e3})}}renderRows(){var t;return null===(t=this.board)||void 0===t?void 0:t.tiles.map(t=>{const e=t.map(t=>{let e,s=`tile tile-${t.state}`;return"lost"===this.board.state?(e=t.mine?"ðŸ’£":t.proximityMines||"","cleared"===t.state&&t.mine&&(s+=" tile-lost")):e="flagged"===t.state?"â›³":"closed"===t.state?"":t.mine?"ðŸ’£":t.proximityMines||"",i("button",{disabled:"cleared"===t.state||"play"!==this.board.state,onContextMenu:e=>this.onTileRightClick(t.y,t.x,e),onClick:()=>this.onTileClick(t.y,t.x),class:s},e)});return i("div",{class:"row"},e)})}render(){var t,e,o;return i(s,null,i("div",{class:"board"},i("div",{class:"controls"},i("button",{class:"start-button",onClick:this.onStartClick},"start"),i("span",null,null!==(e=null===(t=this.board)||void 0===t?void 0:t.remainingMines)&&void 0!==e?e:"-")),i("div",{class:"board-"+(null===(o=this.board)||void 0===o?void 0:o.state)},this.renderRows())))}};r.style=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-direction:column;flex-direction:column}* *:before,*:after{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box}.controls{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around;padding:0 0 1rem 0}.board{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:1rem;border:1px solid red;margin:auto}.tile{width:2.5rem;height:2.5rem;border-radius:0;border:0.5px solid navy}.start-button{padding:.2rem .5rem;border-radius:3px;border:1px solid navy;background-color:lightskyblue;color:navy;text-transform:uppercase;letter-spacing:1px}.start-button:hover{border-color:yellow;color:yellow}.tile:disabled{opacity:1;color:#000}.tile-closed{background-color:lightskyblue}.tile-cleared{background-color:#eee}.row{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.board-lost .tile-flagged{background-color:#A2DDA2}.tile-lost{background-color:#EA1E29 !important}";export{r as game_minesweeper}