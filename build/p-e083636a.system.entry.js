var __spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var r=Array(t),n=0,e=0;e<i;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,n++)r[n]=s[a];return r};System.register(["./p-7b9b92df.system.js"],(function(t){"use strict";var e,i,r,n;return{setters:[function(t){e=t.r;i=t.c;r=t.h;n=t.H}],execute:function(){var s=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];var a=function(t,e){if(t===void 0){t=8}if(e===void 0){e=10}var i=[];var r=0;for(var n=0;n<t;n++){i[n]=[];for(var a=0;a<t;a++){i[n][a]={mine:false,proximityMines:0,state:"closed",x:a,y:n}}}while(r<e){var o=Math.floor(Math.random()*t);var l=Math.floor(Math.random()*t);if(!i[l][o].mine){i[l][o].mine=true;++r}}for(var n=0;n<t;n++){for(var a=0;a<t;a++){var d=0;for(var f=0,c=s;f<c.length;f++){var u=c[f];if(i[n+u[0]]&&i[n+u[0]][a+u[1]]&&i[n+u[0]][a+u[1]].mine){d++}}i[n][a].proximityMines=d}}return{tiles:i,state:"play",amountOfMines:e,remainingMines:e}};var o=function(t,e,i){var r=t.tiles[i][e];r.state="cleared";if(r.mine){return Object.assign(Object.assign({},t),{state:"lost"})}if(r.proximityMines===0){for(var n=0,a=s;n<a.length;n++){var l=a[n];if(t.tiles[r.y+l[0]]&&t.tiles[r.y+l[0]][r.x+l[1]]&&t.tiles[r.y+l[0]][r.x+l[1]].state!=="cleared"){o(t,t.tiles[r.y+l[0]][r.x+l[1]].x,t.tiles[r.y+l[0]][r.x+l[1]].y)}}}return{tiles:__spreadArrays(t.tiles),state:t.state,amountOfMines:t.amountOfMines,remainingMines:t.remainingMines}};var l=function(t,e,i){var r="play";var n=t.tiles[i][e];if(n.state==="flagged")return d(t,e,i);n.state="flagged";var s=t.tiles.flat().filter((function(t){return t.state==="flagged"&&t.mine})).length;var a=t.tiles.flat().filter((function(t){return t.state==="flagged"})).length;if(s===t.amountOfMines){r="win"}return{tiles:__spreadArrays(t.tiles),state:r,amountOfMines:t.amountOfMines,remainingMines:t.amountOfMines-a}};var d=function(t,e,i){var r=t.tiles[i][e];if(r.state==="flagged")r.state="closed";var n=t.tiles.flat().filter((function(t){return t.state==="flagged"})).length;return{tiles:__spreadArrays(t.tiles),state:t.state,amountOfMines:t.amountOfMines,remainingMines:t.amountOfMines-n}};var f=":host{display:inline-block}* *:before,*:after{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box}.controls{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around;padding:0 0 1rem 0}.board{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:1rem;border:1px solid red}.tile{width:2rem;height:2rem;border-radius:0;border:0.5px solid navy}.start-button{padding:.2rem .5rem;border-radius:3px;border:1px solid navy;background-color:lightskyblue;color:navy;text-transform:uppercase;letter-spacing:1px}.start-button:hover{border-color:yellow;color:yellow}.tile:disabled{opacity:1;color:#000}.tile-closed{background-color:lightskyblue}.tile-cleared{background-color:#eee}.row{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.board-lost .tile-flagged{background-color:#A2DDA2}.tile-lost{background-color:#EA1E29 !important}";var c=t("game_minesweeper",function(){function t(t){e(this,t);this.onStartClick=this.onStartClick.bind(this);this.onTileClick=this.onTileClick.bind(this);this.lose=i(this,"lose",7);this.win=i(this,"win",7)}t.prototype.onStartClick=function(){this.board=a(8,10);this.startTime=Date.now()};t.prototype.onTileRightClick=function(t,e,i){i.preventDefault();this.board=l(this.board,e,t);if(this.board.state==="win"){var r=Date.now();var n=(r-this.startTime)/1e3;this.win.emit({size:this.board.tiles.length,won:true,time:n})}};t.prototype.onTileClick=function(t,e){this.board=o(this.board,e,t);if(this.board.state==="lost"){var i=Date.now();var r=(i-this.startTime)/1e3;this.lose.emit({size:this.board.tiles.length,won:false,time:r})}};t.prototype.renderRows=function(){var t=this;var e;return(e=this.board)===null||e===void 0?void 0:e.tiles.map((function(e){var i=e.map((function(e){var i;var n="tile tile-"+e.state;if(t.board.state==="lost"){if(e.mine)i="ðŸ’£";else i=e.proximityMines||"";if(e.state==="cleared"&&e.mine)n+=" tile-lost"}else{if(e.state==="flagged")i="â›³";else if(e.state==="closed")i="";else if(e.mine)i="ðŸ’£";else i=e.proximityMines||""}return r("button",{disabled:e.state==="cleared"||t.board.state!=="play",onContextMenu:function(i){return t.onTileRightClick(e.y,e.x,i)},onClick:function(){return t.onTileClick(e.y,e.x)},class:n},i)}));return r("div",{class:"row"},i)}))};t.prototype.render=function(){var t,e,i;return r(n,null,r("div",{class:"board"},r("div",{class:"controls"},r("button",{class:"start-button",onClick:this.onStartClick},"start"),r("span",null,(e=(t=this.board)===null||t===void 0?void 0:t.remainingMines)!==null&&e!==void 0?e:"-")),r("div",{class:"board-"+((i=this.board)===null||i===void 0?void 0:i.state)},this.renderRows())))};return t}());c.style=f}}}));